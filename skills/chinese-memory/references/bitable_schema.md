# Chinese Memory - 飞书Bitable表结构说明

## 知识图谱表结构

### 表名：知识图谱

| 字段名 | 类型 | 说明 | 示例 |
|-------|------|------|------|
| 主语(Subject) | 文本 | 实体名称 | 老板、扣子虾、飞书 |
| 谓语(Predicate) | 文本 | 关系类型 | 喜欢吃、是、住在 |
| 宾语(Object) | 文本 | 关系目标 | 川菜、AI助手、北京 |
| 置信度(Confidence) | 数字 | 事实可信度 0-1 | 0.95、0.7 |
| 来源(Source) | 文本 | 信息来源 | 对话记录、配置文件 |
| 创建时间 | 日期时间 | 自动填充 | 2026-03-01 10:30 |

### 示例数据

```
┌──────────┬──────────┬────────┬──────────┬────────────┬─────────────────┐
│ Subject  │ Predicate│ Object │Confidence│   Source   │   Created At    │
├──────────┼──────────┼────────┼──────────┼────────────┼─────────────────┤
│   老板   │  喜欢吃  │  川菜  │   0.95   │ 对话记录    │ 2026-03-01 10:00│
│   老板   │  不喜欢  │  香菜  │   0.90   │ 对话记录    │ 2026-03-01 10:01│
│  扣子虾  │    是    │ AI助手 │   1.00   │ 配置文件    │ 2026-03-01 09:00│
│  扣子虾  │  服务于  │  老板  │   1.00   │ 配置文件    │ 2026-03-01 09:00│
└──────────┴──────────┴────────┴──────────┴────────────┴─────────────────┘
```

## 查询示例

### 1. 查询实体的所有属性
```python
query(subject="老板")
# 返回: [老板喜欢吃川菜, 老板不喜欢香菜, ...]
```

### 2. 查询特定关系
```python
query(subject="老板", predicate="喜欢吃")
# 返回: [老板喜欢吃川菜]
```

### 3. 反向查询（谁喜欢吃川菜）
```python
query(predicate="喜欢吃", object="川菜")
# 返回: [老板喜欢吃川菜]
```

## 与向量记忆的配合

| 记忆类型 | 存储位置 | 适用场景 | 查询方式 |
|---------|---------|---------|---------|
| **向量记忆** | LanceDB本地 | 模糊语义、自然语言描述 | 语义相似度搜索 |
| **知识图谱** | 飞书Bitable | 结构化事实、精确关系 | SPARQL-like查询 |

### 使用建议

1. **存向量记忆**：当内容是自然语言描述，需要语义理解时
   ```
   "老板昨天说他对辣的东西情有独钟，特别是那种麻辣火锅"
   ```

2. **存知识图谱**：当内容可以提取为明确的事实时
   ```
   Subject: 老板, Predicate: 喜欢吃, Object: 麻辣火锅
   ```

3. **两者结合**：重要信息同时存储
   - 向量记忆保留原始语境
   - 知识图谱保留结构化事实
